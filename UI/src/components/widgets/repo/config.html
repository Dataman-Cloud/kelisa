<widget-modal widget-modal-title="Configure Code Repo Widget">
<form name="configForm"
	ng-submit="repoConfig.submit(configForm)"
	novalidate="novalidate">

	<form-group input="repoOption"
				class="text-center"
				errors="{required:'Please select a repository type'}">
		<label class="modal-label">仓库类型</label>

		<select name="repoOption"
				class="form-control text-center"
				ng-model="repoConfig.repoOption"
				ng-options="repoOption.value for repoOption in repoConfig.repoOptions"
				required>
			<option value="" disabled>请选择类型</option>
		</select>
	</form-group>

	<form-group input="repoUrl"
				class="text-center"
				errors="{required:'Repository URL is required', url: 'Please enter a valid URL'}">

		<label class="modal-label">仓库URL地址</label>
		<input type="url"
			   name="repoUrl"
			   class="form-control text-center"
			   ng-model="repoConfig.repoUrl"
			   placeholder="Enter URL"
			   autocomplete="off"
			   required />
	</form-group>

	<form-group ng-if="repoConfig.repoOption.name == 'GitHub'  || repoConfig.repoOption.name == 'Bitbucket' || repoConfig.repoOption.name == 'Gitlab'"
				errors="{required:'Branch is required'}"
				input="gitBranch"
				class="text-center">

		<label class="modal-label" id="repoLabel">分支</label>

		<input
			type="text"
			name="gitBranch"
			class="form-control text-center"
			ng-model="repoConfig.gitBranch"
			placeholder="Enter Branch"
			required />

	</form-group>

	<form-group ng-if="repoConfig.repoOption.name != 'Gitlab'" input="repouser"
				errors="{}">

		<label class="modal-label">认证 (可选)</label>

		<input type="text"
			   name="repouser"
			   class="form-control text-center"
			   ng-model="repoConfig.repouser"
			   maxlength="25"
			   autocomplete="off"
			   placeholder="Enter your repo username"/>
	</form-group>
	<form-group ng-if="repoConfig.repoOption.name != 'Gitlab'" input="repopass"
				errors="{errorEncryptingPassword: 'Error encrypting password.'}">
		<input type="password"
			   name="repopass"
			   class="form-control text-center"
			   ng-model="repoConfig.repopass"
			   maxlength="100"
			   placeholder="Enter your repo password" />
	</form-group>

	<form-group ng-if="repoConfig.repoOption.name == 'Gitlab'" input="repokey"
				errors="{}">

		<label class="modal-label">私钥 (可选，用于私有仓库)</label>

		<input type="password"
			   name="repokey"
			   class="form-control text-center"
			   ng-model="repoConfig.repouser"
			   maxlength="25"
			   autocomplete="off"
			   placeholder="请输入私钥"/>
	</form-group>

	<div class="button-row row text-center">
		<button type="submit" class="btn btn-primary btn-wide">保存</button>
	</div>
</form>
</widget-modal>
